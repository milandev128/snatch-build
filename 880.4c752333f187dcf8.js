(self.webpackChunkEasyAngular=self.webpackChunkEasyAngular||[]).push([[880],{8880:(G,r,s)=>{"use strict";s.r(r),s.d(r,{SnatchModule:()=>P});var t=s(6895),n=s(8317),e=s(4108),i=s(7907),c=s(9746),o=s(4650),h=s(3473),u=s(3908),m=s(4470),d=s(8764);const p=["nav"];function a(y,C){1&y&&(o.TgZ(0,"div",15),o._UZ(1,"app-reward-item"),o.qZA())}const l=function(y){return{"pe-none":y}},f=[{path:"",component:(()=>{class y{constructor(_,E){this.modalService=_,this.router=E,this.rewardItems=new Array(20),this.imageName="1.png",this.isStartScratch=!1,this.scratchData={scratchType:c.SCRATCH_TYPE.LINE,containerWidth:300,containerHeight:300,imageForwardSrc:"/assets/img/project/game/snatch/scratch.png",imageBackgroundSrc:"/assets/img/project/game/snatch/1.png",clearZoneRadius:30,nPoints:30,pointSize:4,callback:()=>{console.log("Now the window will reload !"),this.isStartScratch=!1;const O=this.modalService.open(i.n,{centered:!0,modalDialogClass:"game-reward-modal"});O.componentInstance.data={buttonText:"snatch again",reward_item_title:"Free Icecream for a Month",qr_code:"/assets/img/project/game/qr.png",symbol_image:"/assets/img/project/game/nike.png",reward_item_id:"78934dwjdc",reward_item_image:"/assets/img/project/game/snatch/1.png"},O.componentInstance.onButtonClick.subscribe(L=>{console.log("modal button is clicked on spin wheel page")})}}}ngOnInit(){this.imageName="1.png",setTimeout(()=>{this.createNewScratchCard()},100)}onResize(_){window.location?.reload()}createNewScratchCard(){const _=document.getElementById("js--sc--container");this.scratchData.containerWidth=_.offsetWidth,this.scratchData.containerHeight=_.offsetHeight,this.scratchObject=new c.ScratchCard("#js--sc--container",this.scratchData),this.scratchObject.init().then(()=>{this.scratchObject.htmlBackground=this.scratchObject.canvas.addEventListener("scratch.move",()=>{let E=this.scratchObject.getPercent().toFixed(2);console.log(E),E>=80&&(this.imageName="1.png")})}).catch(E=>{alert(E.message)})}onHanldeStartScratch(_){this.isStartScratch=!0}}return y.\u0275fac=function(_){return new(_||y)(o.Y36(h.FF),o.Y36(n.F0))},y.\u0275cmp=o.Xpm({type:y,selectors:[["app-snatch"]],viewQuery:function(_,E){if(1&_&&o.Gf(p,5,e.HU),2&_){let O;o.iGM(O=o.CRH())&&(E.ds=O.first)}},decls:16,vars:10,consts:[[3,"headerTheme"],[1,"container-fluid","snatch-container",3,"resize"],[1,"scroll-wrapper","pt-3","pb-5"],[3,"scroll-x-wheel-enabled"],["nav",""],[1,"container-fluid","px-5"],["drag-scroll-item","","class","mx-2",4,"ngFor","ngForOf"],[1,"mx-auto","g-5"],[1,"sc__wrapper","mx-auto",3,"ngClass"],["id","js--sc--container"],[1,"d-grid","mx-auto","scratch-button-content","mt-5"],[3,"text","size","onClick"],[1,"reward-information","text-dark","text-center","py-4","fw-bold"],[1,"coin-image-wrapper"],["src","assets/img/project/game/snatch/coin.png"],["drag-scroll-item","",1,"mx-2"]],template:function(_,E){1&_&&(o.TgZ(0,"app-page-layout",0)(1,"div",1),o.NdJ("resize",function(L){return E.onResize(L)},!1,o.Jf7),o.TgZ(2,"div",2)(3,"drag-scroll",3,4)(5,"div",5),o.YNc(6,a,2,0,"div",6),o.qZA()()(),o.TgZ(7,"div",7)(8,"div",8),o._UZ(9,"div",9),o.qZA()(),o.TgZ(10,"div",10)(11,"image-button",11),o.NdJ("onClick",function(L){return E.onHanldeStartScratch(L)}),o.qZA()(),o.TgZ(12,"div",12),o._uU(13," You will be charged 100$. "),o.qZA(),o.TgZ(14,"div",13),o._UZ(15,"img",14),o.qZA()()()),2&_&&(o.Q6J("headerTheme","light"),o.xp6(3),o.Q6J("scroll-x-wheel-enabled",!0),o.xp6(3),o.Q6J("ngForOf",E.rewardItems),o.xp6(2),o.Udp("background","url(/assets/img/project/game/snatch/"+E.imageName+")"),o.Q6J("ngClass",o.VKq(8,l,!E.isStartScratch)),o.xp6(3),o.Q6J("text","scratch & win")("size","lg"))},dependencies:[t.mk,t.sg,u.w,m.K,d.A,e.HU,e.$Z],styles:[".snatch-container[_ngcontent-%COMP%]{background-color:#fff;min-height:85vh;position:relative}.scratch-card-bottom[_ngcontent-%COMP%]{margin-top:20px}.scratch-card-bottom[_ngcontent-%COMP%]   .card-bottom-text[_ngcontent-%COMP%]{font-size:1.2em}.sc__wrapper[_ngcontent-%COMP%]{background-repeat:no-repeat!important;background-size:90% 90%!important;background-position:center!important}.scratch-button-content[_ngcontent-%COMP%]{width:35vw}.scroll-wrapper[_ngcontent-%COMP%]{cursor:pointer}.coin-image-wrapper[_ngcontent-%COMP%]{position:absolute;right:1rem;bottom:1rem}.coin-image-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:10rem}@media (max-width: 400px){.scratch-button-content[_ngcontent-%COMP%]{width:50vw}.coin-image-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:6rem}}"]}),y})()}];let b=(()=>{class y{}return y.\u0275fac=function(_){return new(_||y)},y.\u0275mod=o.oAB({type:y}),y.\u0275inj=o.cJS({imports:[n.Bz.forChild(f),n.Bz]}),y})();var w=s(4466);let P=(()=>{class y{}return y.\u0275fac=function(_){return new(_||y)},y.\u0275mod=o.oAB({type:y}),y.\u0275inj=o.cJS({imports:[t.ez,b,w.m,e.l1]}),y})()},9746:G=>{window,G.exports=function(r){var s={};function t(n){if(s[n])return s[n].exports;var e=s[n]={i:n,l:!1,exports:{}};return r[n].call(e.exports,e,e.exports,t),e.l=!0,e.exports}return t.m=r,t.c=s,t.d=function(n,e,i){t.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:i})},t.r=function(n){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},t.t=function(n,e){if(1&e&&(n=t(n)),8&e||4&e&&"object"==typeof n&&n&&n.__esModule)return n;var i=Object.create(null);if(t.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var c in n)t.d(i,c,function(o){return n[o]}.bind(null,c));return i},t.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(e,"a",e),e},t.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},t.p="",t(t.s=66)}([function(r,s){var t=r.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)},function(r,s,t){var n=t(12)("wks"),e=t(13),i=t(0).Symbol,c="function"==typeof i;(r.exports=function(o){return n[o]||(n[o]=c&&i[o]||(c?i:e)("Symbol."+o))}).store=n},function(r,s){var t=r.exports={version:"2.6.11"};"number"==typeof __e&&(__e=t)},function(r,s,t){var n=t(4);r.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},function(r,s){r.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(r,s,t){r.exports=!t(17)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(r,s,t){var n=t(7);r.exports=function(e,i,c){if(n(e),void 0===i)return e;switch(c){case 1:return function(o){return e.call(i,o)};case 2:return function(o,h){return e.call(i,o,h)};case 3:return function(o,h,u){return e.call(i,o,h,u)}}return function(){return e.apply(i,arguments)}}},function(r,s){r.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(r,s){var t={}.toString;r.exports=function(n){return t.call(n).slice(8,-1)}},function(r,s){r.exports=function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}},function(r,s){function t(n,e){for(var i=0;i<e.length;i++){var c=e[i];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(n,c.key,c)}}r.exports=function(n,e,i){return e&&t(n.prototype,e),i&&t(n,i),n}},function(r,s,t){var n=t(8),e=t(1)("toStringTag"),i="Arguments"==n(function(){return arguments}());r.exports=function(c){var o,h,u;return void 0===c?"Undefined":null===c?"Null":"string"==typeof(h=function(m,d){try{return m[d]}catch{}}(o=Object(c),e))?h:i?n(o):"Object"==(u=n(o))&&"function"==typeof o.callee?"Arguments":u}},function(r,s,t){var n=t(2),e=t(0),i=e["__core-js_shared__"]||(e["__core-js_shared__"]={});(r.exports=function(c,o){return i[c]||(i[c]=void 0!==o?o:{})})("versions",[]).push({version:n.version,mode:t(22)?"pure":"global",copyright:"\xa9 2019 Denis Pushkarev (zloirock.ru)"})},function(r,s){var t=0,n=Math.random();r.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++t+n).toString(36))}},function(r,s,t){var n=t(0),e=t(2),i=t(15),c=t(18),o=t(6),h=function(u,m,d){var p,a,l,g,f=u&h.F,b=u&h.G,P=u&h.P,y=u&h.B,C=b?n:u&h.S?n[m]||(n[m]={}):(n[m]||{}).prototype,_=b?e:e[m]||(e[m]={}),E=_.prototype||(_.prototype={});for(p in b&&(d=m),d)l=((a=!f&&C&&void 0!==C[p])?C:d)[p],g=y&&a?o(l,n):P&&"function"==typeof l?o(Function.call,l):l,C&&c(C,p,l,u&h.U),_[p]!=l&&i(_,p,g),P&&E[p]!=l&&(E[p]=l)};n.core=e,h.F=1,h.G=2,h.S=4,h.P=8,h.B=16,h.W=32,h.U=64,h.R=128,r.exports=h},function(r,s,t){var n=t(16),e=t(36);r.exports=t(5)?function(i,c,o){return n.f(i,c,e(1,o))}:function(i,c,o){return i[c]=o,i}},function(r,s,t){var n=t(3),e=t(34),i=t(35),c=Object.defineProperty;s.f=t(5)?Object.defineProperty:function(o,h,u){if(n(o),h=i(h,!0),n(u),e)try{return c(o,h,u)}catch{}if("get"in u||"set"in u)throw TypeError("Accessors not supported!");return"value"in u&&(o[h]=u.value),o}},function(r,s){r.exports=function(t){try{return!!t()}catch{return!0}}},function(r,s,t){var n=t(0),e=t(15),i=t(19),c=t(13)("src"),o=t(37),h=(""+o).split("toString");t(2).inspectSource=function(u){return o.call(u)},(r.exports=function(u,m,d,p){var a="function"==typeof d;a&&(i(d,"name")||e(d,"name",m)),u[m]!==d&&(a&&(i(d,c)||e(d,c,u[m]?""+u[m]:h.join(String(m)))),u===n?u[m]=d:p?u[m]?u[m]=d:e(u,m,d):(delete u[m],e(u,m,d)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[c]||o.call(this)})},function(r,s){var t={}.hasOwnProperty;r.exports=function(n,e){return t.call(n,e)}},function(r,s,t){var n=t(25),e=Math.min;r.exports=function(i){return i>0?e(n(i),9007199254740991):0}},function(r,s,t){"use strict";var n,e,i,c,o=t(22),h=t(0),u=t(6),m=t(11),d=t(14),p=t(4),a=t(7),l=t(38),g=t(39),f=t(43),b=t(26).set,w=t(46)(),P=t(27),y=t(47),C=t(48),_=t(49),E=h.TypeError,O=h.process,L=O&&O.versions,V=L&&L.v8||"",T=h.Promise,z="process"==m(O),H=function(){},N=e=P.f,Y=!!function(){try{var v=T.resolve(1),x=(v.constructor={})[t(1)("species")]=function(S){S(H,H)};return(z||"function"==typeof PromiseRejectionEvent)&&v.then(H)instanceof x&&0!==V.indexOf("6.6")&&-1===C.indexOf("Chrome/66")}catch{}}(),K=function(v){var x;return!(!p(v)||"function"!=typeof(x=v.then))&&x},W=function(v,x){if(!v._n){v._n=!0;var S=v._c;w(function(){for(var j=v._v,M=1==v._s,k=0,A=function(I){var R,D,U,Z=M?I.ok:I.fail,J=I.resolve,X=I.reject,B=I.domain;try{Z?(M||(2==v._h&&tt(v),v._h=1),!0===Z?R=j:(B&&B.enter(),R=Z(j),B&&(B.exit(),U=!0)),R===I.promise?X(E("Promise-chain cycle")):(D=K(R))?D.call(R,J,X):J(R)):X(j)}catch(nt){B&&!U&&B.exit(),X(nt)}};S.length>k;)A(S[k++]);v._c=[],v._n=!1,x&&!v._h&&q(v)})}},q=function(v){b.call(h,function(){var x,S,j,M=v._v,k=$(v);if(k&&(x=y(function(){z?O.emit("unhandledRejection",M,v):(S=h.onunhandledrejection)?S({promise:v,reason:M}):(j=h.console)&&j.error&&j.error("Unhandled promise rejection",M)}),v._h=z||$(v)?2:1),v._a=void 0,k&&x.e)throw x.v})},$=function(v){return 1!==v._h&&0===(v._a||v._c).length},tt=function(v){b.call(h,function(){var x;z?O.emit("rejectionHandled",v):(x=h.onrejectionhandled)&&x({promise:v,reason:v._v})})},F=function(v){var x=this;x._d||(x._d=!0,(x=x._w||x)._v=v,x._s=2,x._a||(x._a=x._c.slice()),W(x,!0))},Q=function(v){var x,S=this;if(!S._d){S._d=!0,S=S._w||S;try{if(S===v)throw E("Promise can't be resolved itself");(x=K(v))?w(function(){var j={_w:S,_d:!1};try{x.call(v,u(Q,j,1),u(F,j,1))}catch(M){F.call(j,M)}}):(S._v=v,S._s=1,W(S,!1))}catch(j){F.call({_w:S,_d:!1},j)}}};Y||(T=function(v){l(this,T,"Promise","_h"),a(v),n.call(this);try{v(u(Q,this,1),u(F,this,1))}catch(x){F.call(this,x)}},(n=function(v){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=t(50)(T.prototype,{then:function(v,x){var S=N(f(this,T));return S.ok="function"!=typeof v||v,S.fail="function"==typeof x&&x,S.domain=z?O.domain:void 0,this._c.push(S),this._a&&this._a.push(S),this._s&&W(this,!1),S.promise},catch:function(v){return this.then(void 0,v)}}),i=function(){var v=new n;this.promise=v,this.resolve=u(Q,v,1),this.reject=u(F,v,1)},P.f=N=function(v){return v===T||v===c?new i(v):e(v)}),d(d.G+d.W+d.F*!Y,{Promise:T}),t(51)(T,"Promise"),t(52)("Promise"),c=t(2).Promise,d(d.S+d.F*!Y,"Promise",{reject:function(v){var x=N(this);return(0,x.reject)(v),x.promise}}),d(d.S+d.F*(o||!Y),"Promise",{resolve:function(v){return _(o&&this===c?T:this,v)}}),d(d.S+d.F*!(Y&&t(53)(function(v){T.all(v).catch(H)})),"Promise",{all:function(v){var x=this,S=N(x),j=S.resolve,M=S.reject,k=y(function(){var A=[],I=0,R=1;g(v,!1,function(D){var U=I++,Z=!1;A.push(void 0),R++,x.resolve(D).then(function(J){Z||(Z=!0,A[U]=J,--R||j(A))},M)}),--R||j(A)});return k.e&&M(k.v),S.promise},race:function(v){var x=this,S=N(x),j=S.reject,M=y(function(){g(v,!1,function(k){x.resolve(k).then(S.resolve,j)})});return M.e&&j(M.v),S.promise}})},function(r,s){r.exports=!1},function(r,s,t){var n=t(4),e=t(0).document,i=n(e)&&n(e.createElement);r.exports=function(c){return i?e.createElement(c):{}}},function(r,s){r.exports={}},function(r,s){var t=Math.ceil,n=Math.floor;r.exports=function(e){return isNaN(e=+e)?0:(e>0?n:t)(e)}},function(r,s,t){var n,e,i,c=t(6),o=t(44),h=t(45),u=t(23),m=t(0),d=m.process,p=m.setImmediate,a=m.clearImmediate,l=m.MessageChannel,g=m.Dispatch,f=0,b={},w=function(){var y=+this;if(b.hasOwnProperty(y)){var C=b[y];delete b[y],C()}},P=function(y){w.call(y.data)};p&&a||(p=function(y){for(var C=[],_=1;arguments.length>_;)C.push(arguments[_++]);return b[++f]=function(){o("function"==typeof y?y:Function(y),C)},n(f),f},a=function(y){delete b[y]},"process"==t(8)(d)?n=function(y){d.nextTick(c(w,y,1))}:g&&g.now?n=function(y){g.now(c(w,y,1))}:l?(i=(e=new l).port2,e.port1.onmessage=P,n=c(i.postMessage,i,1)):m.addEventListener&&"function"==typeof postMessage&&!m.importScripts?(n=function(y){m.postMessage(y+"","*")},m.addEventListener("message",P,!1)):n="onreadystatechange"in u("script")?function(y){h.appendChild(u("script")).onreadystatechange=function(){h.removeChild(this),w.call(y)}}:function(y){setTimeout(c(w,y,1),0)}),r.exports={set:p,clear:a}},function(r,s,t){"use strict";var n=t(7);function e(i){var c,o;this.promise=new i(function(h,u){if(void 0!==c||void 0!==o)throw TypeError("Bad Promise constructor");c=h,o=u}),this.resolve=n(c),this.reject=n(o)}r.exports.f=function(i){return new e(i)}},function(r,s,t){"use strict";var n=t(11),e={};e[t(1)("toStringTag")]="z",e+""!="[object z]"&&t(18)(Object.prototype,"toString",function(){return"[object "+n(this)+"]"},!0)},function(r,s,t){var n=t(30),e=t(31);r.exports=function(i){return n(e(i))}},function(r,s,t){var n=t(8);r.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},function(r,s){r.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},function(r,s,t){var n=t(25),e=Math.max,i=Math.min;r.exports=function(c,o){return(c=n(c))<0?e(c+o,0):i(c,o)}},function(r,s,t){var n=t(31);r.exports=function(e){return Object(n(e))}},function(r,s,t){r.exports=!t(5)&&!t(17)(function(){return 7!=Object.defineProperty(t(23)("div"),"a",{get:function(){return 7}}).a})},function(r,s,t){var n=t(4);r.exports=function(e,i){if(!n(e))return e;var c,o;if(i&&"function"==typeof(c=e.toString)&&!n(o=c.call(e))||"function"==typeof(c=e.valueOf)&&!n(o=c.call(e))||!i&&"function"==typeof(c=e.toString)&&!n(o=c.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},function(r,s){r.exports=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}}},function(r,s,t){r.exports=t(12)("native-function-to-string",Function.toString)},function(r,s){r.exports=function(t,n,e,i){if(!(t instanceof n)||void 0!==i&&i in t)throw TypeError(e+": incorrect invocation!");return t}},function(r,s,t){var n=t(6),e=t(40),i=t(41),c=t(3),o=t(20),h=t(42),u={},m={};(s=r.exports=function(d,p,a,l,g){var f,b,w,P,y=g?function(){return d}:h(d),C=n(a,l,p?2:1),_=0;if("function"!=typeof y)throw TypeError(d+" is not iterable!");if(i(y)){for(f=o(d.length);f>_;_++)if((P=p?C(c(b=d[_])[0],b[1]):C(d[_]))===u||P===m)return P}else for(w=y.call(d);!(b=w.next()).done;)if((P=e(w,C,b.value,p))===u||P===m)return P}).BREAK=u,s.RETURN=m},function(r,s,t){var n=t(3);r.exports=function(e,i,c,o){try{return o?i(n(c)[0],c[1]):i(c)}catch(u){var h=e.return;throw void 0!==h&&n(h.call(e)),u}}},function(r,s,t){var n=t(24),e=t(1)("iterator"),i=Array.prototype;r.exports=function(c){return void 0!==c&&(n.Array===c||i[e]===c)}},function(r,s,t){var n=t(11),e=t(1)("iterator"),i=t(24);r.exports=t(2).getIteratorMethod=function(c){if(null!=c)return c[e]||c["@@iterator"]||i[n(c)]}},function(r,s,t){var n=t(3),e=t(7),i=t(1)("species");r.exports=function(c,o){var h,u=n(c).constructor;return void 0===u||null==(h=n(u)[i])?o:e(h)}},function(r,s){r.exports=function(t,n,e){var i=void 0===e;switch(n.length){case 0:return i?t():t.call(e);case 1:return i?t(n[0]):t.call(e,n[0]);case 2:return i?t(n[0],n[1]):t.call(e,n[0],n[1]);case 3:return i?t(n[0],n[1],n[2]):t.call(e,n[0],n[1],n[2]);case 4:return i?t(n[0],n[1],n[2],n[3]):t.call(e,n[0],n[1],n[2],n[3])}return t.apply(e,n)}},function(r,s,t){var n=t(0).document;r.exports=n&&n.documentElement},function(r,s,t){var n=t(0),e=t(26).set,i=n.MutationObserver||n.WebKitMutationObserver,c=n.process,o=n.Promise,h="process"==t(8)(c);r.exports=function(){var u,m,d,p=function(){var f,b;for(h&&(f=c.domain)&&f.exit();u;){b=u.fn,u=u.next;try{b()}catch(w){throw u?d():m=void 0,w}}m=void 0,f&&f.enter()};if(h)d=function(){c.nextTick(p)};else if(!i||n.navigator&&n.navigator.standalone)if(o&&o.resolve){var a=o.resolve(void 0);d=function(){a.then(p)}}else d=function(){e.call(n,p)};else{var l=!0,g=document.createTextNode("");new i(p).observe(g,{characterData:!0}),d=function(){g.data=l=!l}}return function(f){var b={fn:f,next:void 0};m&&(m.next=b),u||(u=b,d()),m=b}}},function(r,s){r.exports=function(t){try{return{e:!1,v:t()}}catch(n){return{e:!0,v:n}}}},function(r,s,t){var n=t(0).navigator;r.exports=n&&n.userAgent||""},function(r,s,t){var n=t(3),e=t(4),i=t(27);r.exports=function(c,o){if(n(c),e(o)&&o.constructor===c)return o;var h=i.f(c);return(0,h.resolve)(o),h.promise}},function(r,s,t){var n=t(18);r.exports=function(e,i,c){for(var o in i)n(e,o,i[o],c);return e}},function(r,s,t){var n=t(16).f,e=t(19),i=t(1)("toStringTag");r.exports=function(c,o,h){c&&!e(c=h?c:c.prototype,i)&&n(c,i,{configurable:!0,value:o})}},function(r,s,t){"use strict";var n=t(0),e=t(16),i=t(5),c=t(1)("species");r.exports=function(o){var h=n[o];i&&h&&!h[c]&&e.f(h,c,{configurable:!0,get:function(){return this}})}},function(r,s,t){var n=t(1)("iterator"),e=!1;try{var i=[7][n]();i.return=function(){e=!0},Array.from(i,function(){throw 2})}catch{}r.exports=function(c,o){if(!o&&!e)return!1;var h=!1;try{var u=[7],m=u[n]();m.next=function(){return{done:h=!0}},u[n]=function(){return m},c(u)}catch{}return h}},function(r,s,t){var n=t(14);n(n.S+n.F,"Object",{assign:t(55)})},function(r,s,t){"use strict";var n=t(5),e=t(56),i=t(61),c=t(62),o=t(33),h=t(30),u=Object.assign;r.exports=!u||t(17)(function(){var m={},d={},p=Symbol(),a="abcdefghijklmnopqrst";return m[p]=7,a.split("").forEach(function(l){d[l]=l}),7!=u({},m)[p]||Object.keys(u({},d)).join("")!=a})?function(m,d){for(var p=o(m),a=arguments.length,l=1,g=i.f,f=c.f;a>l;)for(var b,w=h(arguments[l++]),P=g?e(w).concat(g(w)):e(w),y=P.length,C=0;y>C;)b=P[C++],n&&!f.call(w,b)||(p[b]=w[b]);return p}:u},function(r,s,t){var n=t(57),e=t(60);r.exports=Object.keys||function(i){return n(i,e)}},function(r,s,t){var n=t(19),e=t(29),i=t(58)(!1),c=t(59)("IE_PROTO");r.exports=function(o,h){var u,m=e(o),d=0,p=[];for(u in m)u!=c&&n(m,u)&&p.push(u);for(;h.length>d;)n(m,u=h[d++])&&(~i(p,u)||p.push(u));return p}},function(r,s,t){var n=t(29),e=t(20),i=t(32);r.exports=function(c){return function(o,h,u){var m,d=n(o),p=e(d.length),a=i(u,p);if(c&&h!=h){for(;p>a;)if((m=d[a++])!=m)return!0}else for(;p>a;a++)if((c||a in d)&&d[a]===h)return c||a||0;return!c&&-1}}},function(r,s,t){var n=t(12)("keys"),e=t(13);r.exports=function(i){return n[i]||(n[i]=e(i))}},function(r,s){r.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(r,s){s.f=Object.getOwnPropertySymbols},function(r,s){s.f={}.propertyIsEnumerable},function(r,s,t){var n=t(14);n(n.P,"Array",{fill:t(64)}),t(65)("fill")},function(r,s,t){"use strict";var n=t(33),e=t(32),i=t(20);r.exports=function(c){for(var o=n(this),h=i(o.length),u=arguments.length,m=e(u>1?arguments[1]:void 0,h),d=u>2?arguments[2]:void 0,p=void 0===d?h:e(d,h);p>m;)o[m++]=c;return o}},function(r,s,t){var n=t(1)("unscopables"),e=Array.prototype;null==e[n]&&t(15)(e,n,{}),r.exports=function(i){e[n][i]=!0}},function(r,s,t){"use strict";t.r(s),t.d(s,"ScratchCard",function(){return d}),t.d(s,"SCRATCH_TYPE",function(){return n}),t(21),t(28),t(54);var n,p,e=t(9),i=t.n(e),c=t(10),o=t.n(c),h=(t(63),function(){function p(a,l,g){i()(this,p),this.ctx=a,this.mouseX=l,this.mouseY=g}return o()(p,[{key:"updateMousePosition",value:function(a,l){this.mouseX=a,this.mouseY=l}},{key:"circle",value:function(a){this.ctx.beginPath(),this.ctx.arc(this.mouseX+a,this.mouseY+a,a,0,2*Math.PI,!1),this.ctx.fillStyle="#000000",this.ctx.fill(),this.ctx.closePath()}},{key:"clearPoint",value:function(a){var l=a,g=2*Math.random()*l-l,f=Math.sqrt(l*l-g*g),b=2*Math.random()*f-f;return g+=l,b+=l,[g+=this.mouseX,b+=this.mouseY]}},{key:"spray",value:function(a,l,g){for(var f=0;f<g;f++){var b=this.clearPoint(a/2);this.ctx.beginPath(),this.ctx.arc(b[0]+a/2,b[1]+a/2,l/2,0,2*Math.PI,!1),this.ctx.fillStyle="#000000",this.ctx.fill(),this.ctx.closePath()}}},{key:"brush",value:function(a){if(null!==a){var l=Math.atan2(this.mouseY,this.mouseX);this.ctx.save(),this.ctx.translate(this.mouseX,this.mouseY),this.ctx.rotate(l),this.ctx.drawImage(a,-a.width/2,-a.height/2)}else{var g=new Error("argument img is not a node IMG");console.log(g.message)}}},{key:"startLine",value:function(a){this.ctx.beginPath(),this.ctx.strokeStyle="black",this.ctx.lineWidth=a,this.ctx.lineJoin=this.ctx.lineCap="round",this.ctx.moveTo(this.mouseX+a,this.mouseY+a)}},{key:"drawLine",value:function(a){this.ctx.filter="blur(1px)",this.ctx.lineTo(this.mouseX+a,this.mouseY+a),this.ctx.stroke()}}]),p}());function u(p){return new Promise(function(a,l){var g=new Image;g.crossOrigin="Anonymous",g.onload=function(){a(g)},g.src=p,g.onerror=function(f){var b=new Error("Image ".concat(p," is not loaded."));l(b)}})}function m(p,a){var l,g;return function(){var f=this,b=+new Date,w=arguments;l&&b<l+a?(clearTimeout(g),g=window.setTimeout(function(){l=b,p.apply(f,w)},a)):(l=b,p.apply(f,w))}}(p=n||(n={}))[p.BRUSH=0]="BRUSH",p[p.SPRAY=1]="SPRAY",p[p.CIRCLE=2]="CIRCLE",p[p.LINE=3]="LINE",function(){if("function"==typeof window.CustomEvent)return!1;function p(a,l){l=l||{bubbles:!1,cancelable:!1,detail:void 0};var g=document.createEvent("CustomEvent");return g.initCustomEvent(a,l.bubbles,l.cancelable,l.detail),g}p.prototype=window.Event.prototype,window.CustomEvent=p}();var d=function(){function p(a,l){var g=this;i()(this,p);var f=this;this.config=Object.assign(Object.assign({},{scratchType:n.LINE,containerWidth:100,containerHeight:100,percentToFinish:50,nPoints:0,pointSize:[0,0],callback:function(){alert("done.")},brushSrc:"",imageForwardSrc:"./images/scratchcard.png",imageBackgroundSrc:"./images/scratchcard-background.svg",htmlBackground:"",clearZoneRadius:0,enabledPercentUpdate:!0}),l),this.scratchType=this.config.scratchType,this.container=document.querySelector(a),this.position=[0,0],this.readyToClear=!1,this.percent=0,this.callbackDone=!1,this.generateCanvas(),this.ctx=this.canvas.getContext("2d"),this.brush=new h(this.ctx,this.position[0],this.position[1]),this.config.scratchType===n.BRUSH&&u(this.config.brushSrc).then(function(P){g.brushImage=P});var w=m(function(P){P.preventDefault(),f.dispatchEvent("scratch","move"),f.position=f.mousePosition(P),f.brush.updateMousePosition(f.position[0],f.position[1]),f.scratch(),g.config.enabledPercentUpdate&&(f.percent=f.updatePercent())},16);this.canvas.addEventListener("mousedown",function(P){P.preventDefault(),f._setScratchPosition(),f.scratchType===n.LINE&&(f.position=f.mousePosition(P),f.brush.updateMousePosition(f.position[0],f.position[1]),f.brush.startLine(f.config.clearZoneRadius)),f.canvas.addEventListener("mousemove",w),document.body.addEventListener("mouseup",function y(C){f.canvas.removeEventListener("mousemove",w),f.finish(),this.removeEventListener("mouseup",y)})}),this.canvas.addEventListener("touchstart",function(P){P.preventDefault(),f._setScratchPosition(),f.scratchType===n.LINE&&(f.position=f.mousePosition(P),f.brush.updateMousePosition(f.position[0],f.position[1]),f.brush.startLine(f.config.clearZoneRadius)),f.canvas.addEventListener("touchmove",w),document.body.addEventListener("touchend",function y(){f.canvas.removeEventListener("touchmove",w),f.finish(),this.removeEventListener("touchend",y)})}),window.addEventListener("resize",m(function(){g._setScratchPosition()},100)),window.addEventListener("scroll",m(function(){g._setScratchPosition()},16))}return o()(p,[{key:"getPercent",value:function(){return this.percent}},{key:"_setScratchPosition",value:function(){this.zone=function(a){for(var l={left:0,top:0},g=a.getBoundingClientRect();a;)l.top+=a.offsetTop,l.left+=a.offsetLeft,a=a.offsetParent;var f=l.left-g.left,b=l.top-g.top;return{left:f<0?l.left+Math.abs(f):l.left-Math.abs(f),top:b<0?l.top+Math.abs(b):l.top-Math.abs(b)}}(this.canvas)}},{key:"finish",value:function(){!this.callbackDone&&this.percent>this.config.percentToFinish&&(this.clear(),this.canvas.style.pointerEvents="none",void 0!==this.config.callback&&(this.callbackDone=!0,this.config.callback()))}},{key:"dispatchEvent",value:function(a,l){var g,f,w;g=this.canvas,f="".concat(a,".").concat(l),w=new CustomEvent(f,{bubbles:!0,cancelable:!0,detail:{}}),g.dispatchEvent(w)}},{key:"init",value:function(){var a=this;return new Promise(function(l,g){u(a.config.imageForwardSrc).then(function(f){a.scratchImage=f,a.ctx.drawImage(a.scratchImage,0,0,a.canvas.width,a.canvas.height),a.setBackground(),l()},function(f){return g(f),new TypeError("".concat(a.config.imageForwardSrc," is not loaded."))})})}},{key:"generateCanvas",value:function(){this.canvas=document.createElement("canvas"),this.canvas.classList.add("sc__canvas"),this.canvas.width=this.config.containerWidth,this.canvas.height=this.config.containerHeight,this.container.appendChild(this.canvas)}},{key:"setBackground",value:function(){var a=this;if(0!==this.config.htmlBackground.length)!function(g,f){var b=new DOMParser,w=document.createElement("div");w.classList.add("sc__inner");var P=b.parseFromString(g,"text/html");w.innerHTML=P.body.innerHTML,f.insertBefore(w,f.firstElementChild)}(this.config.htmlBackground,this.container);else{var l=document.createElement("img");u(this.config.imageBackgroundSrc).then(function(g){l.src=g.src,a.container.insertBefore(l,a.canvas)},function(g){console.log(g.message)})}}},{key:"mousePosition",value:function(a){var l,g;switch(a.type){case"touchmove":l=a.touches[0].clientX-this.config.clearZoneRadius-this.zone.left,g=a.touches[0].clientY-this.config.clearZoneRadius-this.zone.top;break;case"mousemove":l=a.clientX-this.config.clearZoneRadius-this.zone.left,g=a.clientY-this.config.clearZoneRadius-this.zone.top}return[l,g]}},{key:"scratch",value:function(){switch(this.ctx.globalCompositeOperation="destination-out",this.ctx.save(),this.config.scratchType){case n.BRUSH:this.brush.brush(this.brushImage);break;case n.CIRCLE:this.brush.circle(this.config.clearZoneRadius);break;case n.SPRAY:this.brush.spray(this.config.clearZoneRadius,this.config.pointSize,this.config.nPoints);break;case n.LINE:this.brush.drawLine(this.config.clearZoneRadius)}this.ctx.restore()}},{key:"updatePercent",value:function(){for(var a=0,l=this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height),g=l.data.length,f=0;f<g;f+=4)0===l.data[f]&&0===l.data[f+1]&&0===l.data[f+2]&&0===l.data[f+3]&&a++;return a>=1?a/(this.canvas.width*this.canvas.height)*100:0}},{key:"clear",value:function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}}]),p}();window.ScratchCard=d,window.SCRATCH_TYPE=n}])}}]);